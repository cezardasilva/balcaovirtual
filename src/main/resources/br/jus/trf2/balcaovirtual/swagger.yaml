swagger: '2.0'

info:
  version: "1.0.0"
  title: Balcao Virtual
  description: Micro-serviço para obter indicadores de gestão

# host: assijus.jfrj.jus.br
basePath: /balcaovirtual/api/v1
schemes: [http,https]
consumes: [application/json]
produces: [application/json]

tags:
  - name: stats
    description: Obter estatísticas


################################################################################
#                                   Parameters                                 #
################################################################################
parameters:
  nome:
    name: nome
    in: formData
    description: Nome do usuário
    type: string
    required: false
  email:
    name: email
    in: formData
    description: Email do usuário
    type: string
    required: false
  mensagem:
    name: mensagem
    in: formData
    description: Sugestão
    type: string
    required: true
  username:
    name: username
    in: formData
    description: Identificador do usuário
    type: string
    required: true
  password:
    name: password
    in: formData
    description: Senha do usuário
    type: string
    required: true
  orgao:
    name: orgao
    in: formData
    description: Órgão do processo
    required: true
    type: string
  numero:
    name: numero
    in: path
    description: Número do processo só algarismos
    required: true
    type: string
  tipopeticao:
    name: tipopeticao
    in: formData
    description: Código do tipo da petição
    type: string
    required: true
  nivelsigilo:
    name: nivelsigilo
    in: formData
    description: Código do nivel de sigilo
    type: string
    required: true
  pdfs:
    name: pdfs
    in: formData
    description: Referência para os PDFs que foram enviados previamente para o servidor, separadas por vírgula
    type: string
    required: true
  pdf:
    name: pdf
    in: path
    description: Referência para o PDF que foi enviado previamente para o servidor
    type: string
    required: true
  data:
    name: data
    in: query
    description: Data a ser consultada
    required: true
    type: string
  id:
    name: id
    in: path
    description: Número da id só algarismos
    required: true
    type: string
  id2:
    name: id2
    in: path
    description: Número da id só algarismos
    required: true
    type: string
  jwt:
    name: jwt
    in: path
    description: JWT que referencia um artefato a ser baixado
    required: true
    type: string
  filename:
    name: filename
    in: path
    description: Nome do arquivo de um artefato a ser baixado
    required: true
    type: string
  disposition:
    name: disposition
    in: query
    description: Informar attachment se desejar receber como um download
    required: false
    type: string
  orgaoquery:
    name: orgao
    in: query
    description: Órgao
    required: true
    type: string
  idclasse:
    name: idclasse
    in: formData
    description: Id da classe no CNJ
    type: string
    required: true
  idmarca:
    name: idmarca
    in: formData
    description: Id da marca
    type: string
    required: false
  texto:
    name: texto
    in: formData
    description: Texto da marca
    type: string
    required: true
  idestilo:
    name: idestilo
    in: formData
    description: Estilo da marca
    type: string
    required: true
  paginicial:
    name: paginicial
    in: formData
    description: Página inicial da marca
    type: string
    required: false
  pagfinal:
    name: pagfinal
    in: formData
    description: Página final da marca
    type: string
    required: false
  localidade:
    name: localidade
    in: formData
    description: Localidade
    type: string
    required: true
  especialidade:
    name: especialidade
    in: formData
    description: Especialidade
    type: string
    required: true
  classe:
    name: classe
    in: formData
    description: Classe do CNJ
    type: string
    required: true
  partes:
    name: partes
    in: formData
    description: Partes codificadas em JSON
    type: string
    required: true

################################################################################
#                                           Paths                              #
################################################################################
paths:
  /sugestao:
    post:
      consumes: ["application/x-www-form-urlencoded"]
      parameters:
        - $ref: "#/parameters/nome"
        - $ref: "#/parameters/email"
        - $ref: "#/parameters/mensagem"
      description: Enviar sugestões
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              status:
                type: string
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /sessions/create:
    post:
      consumes: ["application/x-www-form-urlencoded"]
      parameters:
        - $ref: "#/parameters/username"
        - $ref: "#/parameters/password"
      description: Autenticar usuário
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              id_token:
                type: string
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /config/peticao-intercorrente/tipos:
    get:
      description: Tipos de petição intercorrente
      tags: [config]
      parameters: []
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/ConfigTipoPeticaoIntercorrente"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /config/peticao-inicial/dados-basicos:
    get:
      description: Diversos parâmetros para petição inicial
      tags: [config]
      parameters:
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              listentidade:
                type: array
                items:
                  $ref: "#/definitions/Entidade"
              listtipoatuacaoadvogado:
                type: array
                items:
                  $ref: "#/definitions/TipoAtuacaoAdvogado"
              listtipoatuacaodefensor:
                type: array
                items:
                  $ref: "#/definitions/TipoAtuacaoDefensor"
              listtipoatuacaoprocurador:
                type: array
                items:
                  $ref: "#/definitions/TipoAtuacaoProcurador"
              listtipoatuacaoautor:
                type: array
                items:
                  $ref: "#/definitions/TipoAtuacaoAutor"
              listtipoatuacaoreu:
                type: array
                items:
                  $ref: "#/definitions/TipoAtuacaoReu"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /config/orgaos:
    get:
      description: Diversos parâmetros para petição inicial
      tags: [config]
      parameters: []
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/OrgaoInfo"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /config/localidades:
    get:
      description: Diversos parâmetros para petição inicial
      tags: [config]
      parameters:
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/Localidade"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /config/localidade/{id}/especialidades:
    get:
      description: Diversos parâmetros para petição inicial
      tags: [config]
      parameters:
        - $ref: "#/parameters/id"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/Especialidade"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /config/especialidade/{id}/classes:
    get:
      description: Diversos parâmetros para petição inicial
      tags: [config]
      parameters:
        - $ref: "#/parameters/id"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/Classe"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /processo/{numero}/validar:
    get:
      description: Validar o número do processo
      tags: [utils]
      parameters:
        - $ref: "#/parameters/numero"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              numero:
                $ref: "#/definitions/Numero"
              orgao:
                $ref: "#/definitions/Orgao"
              unidade:
                $ref: "#/definitions/Unidade"
              segredodejustica:
                $ref: "#/definitions/SegredoDeJustica"
              segredodejusticadesistema:
                $ref: "#/definitions/SegredoDeJusticaDeSistema"
              segredodejusticaabsoluto:
                $ref: "#/definitions/SegredoDeJusticaAbsoluto"
              digital:
                $ref: "#/definitions/Digital"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /processo/{numero}/peticionar:
    post:
      description: Enviar petições para um processo
      tags: [utils]
      consumes: ["application/x-www-form-urlencoded"]
      parameters:
        - $ref: "#/parameters/numero"
        - $ref: "#/parameters/orgao"
        - $ref: "#/parameters/tipopeticao"
        - $ref: "#/parameters/nivelsigilo"
        - $ref: "#/parameters/pdfs"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              status:
                type: string
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /processo/autuar:
    post:
      description: Enviar petição inicial
      tags: [utils]
      consumes: ["application/x-www-form-urlencoded"]
      parameters:
        - $ref: "#/parameters/orgao"
        - $ref: "#/parameters/localidade"
        - $ref: "#/parameters/especialidade"
        - $ref: "#/parameters/classe"
        - $ref: "#/parameters/nivelsigilo"
        - $ref: "#/parameters/partes"
        - $ref: "#/parameters/pdfs"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              status:
                type: string
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
  /processo/{numero}/consultar:
    get:
      description: Enviar petições para um processo
      tags: [utils]
      parameters:
        - $ref: "#/parameters/numero"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              payload:
                type: string
                format: byte
                description: PDF codificado em base64
              contenttype:
                type: string
                description: Constante em application/pdf
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
            
  /processo/{numero}/peca/{id}/pdf:
    get:
      description: Obter o PDF de uma peça processual para visualização
      tags: [view]
      parameters:
        - $ref: "#/parameters/numero"
        - $ref: "#/parameters/id"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              jwt:
                type: string
                description: JWT com as informações para download do PDF
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /processo/{numero}/pdf:
    get:
      description: Obter o PDF completo de um processo para visualização
      tags: [view]
      parameters:
        - $ref: "#/parameters/numero"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              jwt:
                type: string
                description: JWT com as informações para download do PDF
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /processo/{numero}/aviso/{id}/receber:
    post:
      description: Confirmar o recebimento de um aviso e obter o teor da comunicação
      tags: [view]
      parameters:
        - $ref: "#/parameters/numero"
        - $ref: "#/parameters/id"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              idaviso:
                type: string
              dataaviso:
                type: string
              tipo:
                type: string
              processo:
                type: string
              orgao:
                type: string
              teor:
                type: string
              datarecebimento:
                type: string
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /classe/{id}/marcadores:
    get:
      description: Obter lista de marcadores de uma classe processual
      tags: [marca]
      parameters:
        - $ref: "#/parameters/id"
      responses:
        200:
          description: Successful response
          schema:
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/Marcador"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /marca/{id}:
    delete:
      description: Remover marca
      tags: [marca]
      parameters:
        - $ref: "#/parameters/id"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              status:
                type: string
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /processo/{numero}/marcas:
    get:
      description: Obter marcas de um processo
      tags: [marca]
      parameters:
        - $ref: "#/parameters/numero"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/Marca"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /processo/{numero}/peca/{id}/marca:
    post:
      description: Acrescentar uma marca
      tags: [marca]
      consumes: ["application/x-www-form-urlencoded"]
      parameters:
        - $ref: "#/parameters/numero"
        - $ref: "#/parameters/id"
        - $ref: "#/parameters/idclasse"
        - $ref: "#/parameters/orgaoquery"
        - $ref: "#/parameters/idmarca"
        - $ref: "#/parameters/texto"
        - $ref: "#/parameters/idestilo"
        - $ref: "#/parameters/paginicial"
        - $ref: "#/parameters/pagfinal"
      responses:
        200:
          description: Successful response
          schema:
            properties:
              marca:
                $ref: "#/definitions/Marca"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /download/{jwt}/{filename}:
    get:
      description: Faz o download de um artefato qualquer
      tags: [view]
      parameters:
        - $ref: "#/parameters/jwt"
        - $ref: "#/parameters/filename"
        - $ref: "#/parameters/disposition"
      responses:
        200:
          description: Successful response
          schema:
            type: file
          headers:
            Content-Type:
              type: string
              description: application/pdf
            Content-Disposition:
              type: string
              description: attachment
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"
            
            
  /arquivo-temporario/{pdf}:
    get:
      description: Obter o PDF de um documento para visualização
      tags: [view]
      parameters:
        - $ref: "#/parameters/pdf"
      responses:
        200:
          description: Successful response
          schema:
            type: file
          headers: 
            Content-Type:
              type: string
              description: application/pdf
            Content-Disposition:
              type: string
              description: attachment
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /peticao-intercorrente/contar:
    get:
      description: Validar o número do processo
      tags: [utils]
      parameters: []
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/QuantidadePorData"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /peticao-intercorrente/listar:
    get:
      description: Validar o número do processo
      tags: [utils]
      parameters: 
        - $ref: "#/parameters/data"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/PeticaoIntercorrenteResumo"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /aviso/listar:
    get:
      description: Listar as intimações para o usuário logado
      tags: [utils]
      parameters: []
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              list:
                type: array
                items:
                  $ref: "#/definitions/Aviso"
              status:
                type: array
                items:
                  $ref: "#/definitions/ListStatus"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /classe/{id}:
    get:
      description: Obter dados de uma classe pela id
      tags: [utils]
      parameters:
        - $ref: "#/parameters/id"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              codigo:
                $ref: "#/definitions/Codigo"
              descricao:
                $ref: "#/definitions/Descricao"
              descricaocompleta:
                $ref: "#/definitions/DescricaoCompleta"
              ativo:
                $ref: "#/definitions/Ativo"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"

  /assunto/{id}:
    get:
      description: Obter dados de um assunto pela id
      tags: [utils]
      parameters:
        - $ref: "#/parameters/id"
        - $ref: "#/parameters/orgaoquery"
      responses:
        200:
          description: Successful response
          schema:
            type: object
            properties:
              codigo:
                $ref: "#/definitions/Codigo"
              descricao:
                $ref: "#/definitions/Descricao"
              descricaocompleta:
                $ref: "#/definitions/DescricaoCompleta"
              ativo:
                $ref: "#/definitions/Ativo"
        500:
          description: Error ocurred
          schema:
            $ref: "#/definitions/Error"


################################################################################
#                                     Definitions                              #
################################################################################
definitions:
  ConfigTipoPeticaoIntercorrente:
    description: Tipo de petição intercorrente
    type: object
    properties:
      id:
        type: string
      descricao:
        type: string
      orgao:
        type: string

  Entidade:
    description: Entidade
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  Localidade:
    description: Localidade
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  TipoAtuacaoAdvogado:
    description: Tipo de atuação do advogado
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  TipoAtuacaoDefensor:
    description: Tipo de atuação do defensor
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  TipoAtuacaoProcurador:
    description: Tipo de atuação do procurador
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  TipoAtuacaoAutor:
    description: Tipo de atuação do autor
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  TipoAtuacaoReu:
    description: Tipo de atuação do réu
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  Especialidade:
    description: Especialidade
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  Classe:
    description: Classe
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  OrgaoInfo:
    description: Classe
    type: object
    properties:
      id:
        type: string
      nome:
        type: string

  Numero:
    description: Número do processo
    type: string
    example: 00002294020154020000

  Orgao:
    description: Órgão do processo
    type: string
    example: JFRJ

  Unidade:
    description: Unidade do processo
    type: string
    example: 01JEF

  SegredoDeJustica:
    description: Segredo de Justiça
    type: boolean
    example: false
    
  SegredoDeJusticaDeSistema:
    description: Segredo de Justiça de Sistema
    type: boolean
    example: false
    
  SegredoDeJusticaAbsoluto:
    description: Segredo de Justiça Absoluto
    type: boolean
    example: false
    
  Digital:
    description: Processo Digital
    type: boolean
    example: false
    
  QuantidadePorData:
    description: Data e quantidade de itens
    type: object
    properties:
      data:
        type: string
      quantidade:
        type: string

  PeticaoIntercorrenteResumo:
    description: Petição intercorrente
    type: object
    properties:
      processo:
        type: string
      protocolo:
        type: string
      dataprotocolo:
        type: string
      classe:
        type: string
      unidade:
        type: string
      orgao:
        type: string

  Aviso:
    description: Aviso
    type: object
    properties:
      idaviso:
        type: string
      dataaviso:
        type: string
      tipo:
        type: string
      processo:
        type: string
      unidade:
        type: string
      unidadenome:
        type: string
      unidadetipo:
        type: string
      orgao:
        type: string
      localidade:
        type: string
      teor:
        type: string

  Marca:
    description: Marca
    type: object
    properties:
      idmarca:
        type: string
      idpeca:
        type: string
      texto:
        type: string
      paginicial:
        type: string
      pagfinal:
        type: string
      idestilo:
        type: string
      nomeusuario:
        type: string
      dataalteracao:
        type: string
        format: date-time
        
  Marcador:
    description: Marcador
    type: object
    properties:
      texto:
        type: string

  ListStatus:
    type: object
    properties:
      system:
        type: string
        description: Identificador do sistema integrado
      errormsg:
        type: string
        description: Mensagem de erro se houver
      stacktrace:
        type: string
        description: Detalhamento do erro

  Codigo:
    type: string
    description: Código
    
  Descricao:
    type: string
    description: Apenas o nível mais específico da descrição
    
  DescricaoCompleta:
    type: string
    description: Descrição incluindo todos os níveis superiores
    
  Ativo:
    type: boolean
    description: Ativo true ou false
    
  Error:
    type: object
    properties:
      errormsg:
        type: string